<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responder Redação</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="card">
            <div class="card-header">
                <h3>{{ redacao.titulo or 'Redação' }}</h3>
            </div>
            <div class="card-body">
                {% if redacao.comando %}
                <div class="info-section">
                    <h5><i class="fas fa-file-alt"></i> Comando da Redação:</h5>
                    <div class="border p-3 bg-white rounded">
                        {{ redacao.comando|safe }}
                    </div>
                </div>
                {% endif %}

                {% if redacao.texto_apoio %}
                <div class="info-section">
                    <h5><i class="fas fa-book"></i> Texto de Apoio:</h5>
                    <div class="border p-3 bg-white rounded">
                        {{ redacao.texto_apoio|safe }}
                    </div>
                </div>
                {% else %}
                <!-- Debug: texto_apoio está vazio ou None -->
                {% endif %}

                {% if redacao.arquivo_apoio %}
                <div class="info-section">
                    <h5><i class="fas fa-paperclip"></i> Arquivos de Apoio:</h5>
                    <div class="border p-3 bg-white rounded">
                        {% set arquivos = redacao.arquivo_apoio.split(',') %}
                        {% for arquivo in arquivos %}
                            {% if arquivo.strip() %}
                            <div class="mb-2">
                                <a href="{{ url_for('static', filename='uploads/' + arquivo.strip()) }}" 
                                   target="_blank" class="btn btn-secondary btn-sm">
                                    <i class="fas fa-download"></i> {{ arquivo.strip() }}
                                </a>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <!-- Debug: arquivo_apoio está vazio ou None -->
                {% endif %}

                <form method="POST">
                    <div class="info-section">
                        <h5><i class="fas fa-user"></i> Informações do Aluno:</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <label for="aluno_nome">Nome Completo *</label>
                                <input type="text" id="aluno_nome" name="aluno_nome" required>
                            </div>
                            <div class="col-md-6">
                                <label for="escola">Escola *</label>
                                <input type="text" id="escola" name="escola" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <label for="turma">Turma *</label>
                                <input type="text" id="turma" name="turma" required>
                            </div>
                            <div class="col-md-4">
                                <label for="serie">Série *</label>
                                <input type="text" id="serie" name="serie" required>
                            </div>
                            <div class="col-md-4">
                                <label for="componente">Componente Curricular *</label>
                                <input type="text" id="componente" name="componente" required>
                            </div>
                        </div>
                        <div>
                            <label for="professor_nome">Nome do Professor *</label>
                            <input type="text" id="professor_nome" name="professor_nome" required>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5><i class="fas fa-edit"></i> Sua Redação:</h5>
                        
                        <div class="mb-3">
                            <label for="titulo_redacao">
                                <i class="fas fa-heading"></i> Título da Redação 
                                <small class="text-muted">(Opcional)</small>
                            </label>
                            <input type="text" id="titulo_redacao" name="titulo_redacao" 
                                   placeholder="Digite o título da sua redação (opcional)...">
                        </div>

                        <div class="info-linhas">
                            <p class="text-muted mb-2">
                                <i class="fas fa-info-circle"></i> 
                                Sugestão: {{ redacao.max_linhas }} linhas
                            </p>
                        </div>
                        <textarea class="texto-redacao" id="texto_redacao" name="texto_redacao" 
                            placeholder="Digite sua redação aqui..." required></textarea>
                    </div>

                    <div class="d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary" onclick="limparTexto()">
                            <i class="fas fa-eraser"></i> Limpar
                        </button>
                        <button type="submit" class="btn" id="btn-enviar">
                            <i class="fas fa-paper-plane"></i> Enviar Redação
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://kit.fontawesome.com/your-fontawesome-kit.js"></script>
    <script>
        function limparTexto() {
            if (confirm('Tem certeza que deseja limpar todo o texto? Esta ação não pode ser desfeita.')) {
                document.getElementById('texto_redacao').value = '';
                document.getElementById('titulo_redacao').value = '';
            }
        }
    </script>
</body>
</html> 